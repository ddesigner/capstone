
version: 1

indices:
  pages:
    include:
      - "/**"
    exclude:
      - "/**.json"
    target: /query-index.json

    properties:
      Path:
        select: none
        value: path

      OgTitle:
        select: head > meta[property="og:title"]
        value: attribute(el, "content")

      Description:
        select: head > meta[name="description"]
        value: attribute(el, "content")

      Robots:
        select: head > meta[name="robots"]
        value: attribute(el, "content")

      LastModified:
        select: none
        value: formatTimestamp(
          parseTimestamp(headers["last-modified"], "ddd, DD MMM YYYY hh:mm:ss GMT"),
          "YYYY-MM-DDTHH:mm:ssZ")

